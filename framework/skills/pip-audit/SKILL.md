---
name: pip-audit
description: Pip-audit CVE scanning for Python dependencies. Activates when dealing with dependency vulnerabilities or security advisories.
---

# Pip-audit Skill

Scans Python dependencies for known CVEs (Common Vulnerabilities and Exposures).

## How It Runs

Pre-commit hook: `pip-audit --strict --progress-spinner off -r requirements-audit.txt`

The `requirements-audit.txt` is generated by uv:

```bash
uv export --format requirements.txt --no-emit-project --output-file requirements-audit.txt
```

`--no-emit-project` is important - without it, editable installs break hash verification.

## When It Triggers

A dependency has a known CVE. Options:

1. **Update the dependency**: `uv add package@latest`
2. **Pin a safe version**: check the advisory for patched versions
3. **Suppress** (temporary, with justification): add to pip-audit ignore

## Regenerating Requirements

After changing dependencies in `pyproject.toml`:

```bash
uv export --format requirements.txt --no-emit-project --output-file requirements-audit.txt
```

This file should be committed to the repo.

## Commands

```bash
# Scan from requirements file
pip-audit -r requirements-audit.txt --strict

# Scan current environment
pip-audit --strict

# Show fix suggestions
pip-audit -r requirements-audit.txt --fix --dry-run
```
