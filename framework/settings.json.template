{
  "permissions": {
    "allow": [
      "Bash(npm::*)",
      "Bash(npx::*)",
      "Bash(node::*)",
      "Bash(python::*)",
      "Bash(python3::*)",
      "Bash(pip::*)",
      "Bash(pip3::*)",
      "Bash(docker::*)",
      "Bash(docker-compose::*)",
      "Bash(git::*)",
      "Bash(dotnet::*)",
      "Bash(cargo::*)",
      "Bash(rustc::*)",
      "Bash(cmake::*)",
      "Bash(make::*)",
      "Bash(ctest::*)",
      "Bash(lua::*)",
      "Bash(luarocks::*)",
      "Bash(busted::*)",
      "Bash(clang-format::*)",
      "Bash(clang-tidy::*)",
      "Bash(stylua::*)",
      "Bash(shfmt::*)",
      "Bash(semgrep::*)",
      "Bash(curl::*)",
      "Bash(wget::*)",
      "Bash(tree::*)",
      "Bash(jq::*)",
      "Read(**/*)",
      "Write(**/*)",
      "Edit(**/*)",
      "Glob(**/*)",
      "Grep(**/*)",
      "Task(*)",
      "WebFetch(*)",
      "Skill",
      "mcp__filesystem",
      "mcp__git",
      "mcp__github",
      "mcp__memory",
      "mcp__sequential-thinking",
      "mcp__context7",
      "mcp__fetch",
      "mcp__semgrep",
      "mcp__letta",
      "mcp__tavily",
      "mcp__code-graph",
      "mcp__tot",
      "mcp__reflection"
    ],
    "deny": [
      "Bash(rm -rf /::*)",
      "Bash(sudo rm::*)",
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./secrets/**)",
      "Read(**/*secret*)",
      "Read(**/*credential*)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash(git commit::*)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/pre-commit.sh 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Bash(git push::*)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/pre-push.sh 2>/dev/null || true"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "case \"$CLAUDE_TOOL_INPUT_FILE_PATH\" in *.cs) dotnet format --include \"$CLAUDE_TOOL_INPUT_FILE_PATH\" 2>/dev/null || true ;; *.rs) cargo fmt 2>/dev/null || true ;; *.cpp|*.c|*.h|*.hpp) clang-format -i \"$CLAUDE_TOOL_INPUT_FILE_PATH\" 2>/dev/null || true ;; *.lua) stylua \"$CLAUDE_TOOL_INPUT_FILE_PATH\" 2>/dev/null || true ;; *.sh) shfmt -w \"$CLAUDE_TOOL_INPUT_FILE_PATH\" 2>/dev/null || true ;; esac"
          },
          {
            "type": "command",
            "command": ".claude/hooks/index-file.sh \"$CLAUDE_TOOL_INPUT_FILE_PATH\" 2>/dev/null || true"
          }
        ]
      }
    ]
  },
  "env": {
    "CODEAGENT_MODE": "autonomous",
    "CODEAGENT_THINKING": "enabled",
    "TDD_STRICT": "true",
    "EXTERNAL_VALIDATION_ONLY": "true"
  },
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "."]
    },
    "git": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-git", "--repository", "."]
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    },
    "sequential-thinking": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sequential-thinking"]
    },
    "context7": {
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp"]
    },
    "fetch": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-fetch"]
    },
    "semgrep": {
      "command": "npx",
      "args": ["-y", "@semgrep/mcp-server"]
    }
  }
}
