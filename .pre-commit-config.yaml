# =============================================================================
# AI Guardrails - Auto-Generated Pre-Commit Configuration
# =============================================================================
# Generated by: python -m lib.python.assemble_precommit
# Do not edit manually - regenerate with ai-guardrails-init
# =============================================================================

fail_fast: true
default_language_version:
  python: python3.12
  node: 20.11.0
  rust: stable
repos:
- repo: local
  hooks:
  - id: format-and-stage
    name: format and stage
    entry: lib/hooks/format-and-stage.sh
    language: script
    always_run: true
    pass_filenames: false
- repo: https://github.com/gitleaks/gitleaks
  rev: v8.21.2
  hooks:
  - id: gitleaks
    name: security - gitleaks detect secrets
- repo: https://github.com/Yelp/detect-secrets
  rev: v1.5.0
  hooks:
  - id: detect-secrets
    name: security - detect-secrets enhanced
    args:
    - --baseline
    - .secrets.baseline
    exclude: package-lock\.json|\.secrets\.baseline
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v5.0.0
  hooks:
  - id: detect-private-key
    name: security - detect private keys
- repo: https://github.com/semgrep/semgrep
  rev: v1.149.0
  hooks:
  - id: semgrep
    name: security - semgrep SAST scan
    args:
    - --config
    - auto
    - --error
    - --jobs
    - '1'
    exclude: ^tests/
- repo: https://github.com/compilerla/conventional-pre-commit
  rev: v4.3.0
  hooks:
  - id: conventional-pre-commit
    name: commit - conventional commit format
    stages:
    - commit-msg
    args:
    - feat
    - fix
    - docs
    - style
    - refactor
    - perf
    - test
    - build
    - ci
    - chore
    - revert
- repo: https://github.com/codespell-project/codespell
  rev: v2.4.1
  hooks:
  - id: codespell
    name: spelling - codespell typo check
    args:
    - --check-filenames
    exclude: ^(poetry\.lock|package-lock\.json|\.secrets\.baseline)$
- repo: https://github.com/DavidAnson/markdownlint-cli2
  rev: v0.17.2
  hooks:
  - id: markdownlint-cli2
    name: markdown - markdownlint
- repo: https://github.com/python-jsonschema/check-jsonschema
  rev: 0.30.0
  hooks:
  - id: check-github-workflows
    name: github - validate workflow files
  - id: check-github-actions
    name: github - validate action files
- repo: https://github.com/ComPWA/taplo-pre-commit
  rev: v0.9.3
  hooks:
  - id: taplo-format
    name: toml - taplo format check
    args:
    - --check
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v5.0.0
  hooks:
  - id: trailing-whitespace
    name: format - trailing whitespace
    args:
    - --markdown-linebreak-ext=md
  - id: end-of-file-fixer
    name: format - end of file fixer
  - id: mixed-line-ending
    name: format - mixed line endings
    args:
    - --fix=lf
  - id: check-yaml
    name: syntax - check yaml
    args:
    - --unsafe
  - id: check-json
    name: syntax - check json
  - id: check-toml
    name: syntax - check toml
  - id: check-xml
    name: syntax - check xml
  - id: check-merge-conflict
    name: git - check merge conflicts
  - id: check-added-large-files
    name: git - check large files
    args:
    - --maxkb=500
  - id: no-commit-to-branch
    name: git - no commit to main
    args:
    - --branch=main
    - --branch=master
  - id: check-case-conflict
    name: files - case conflict
  - id: check-symlinks
    name: files - broken symlinks
  - id: check-executables-have-shebangs
    name: files - executables have shebangs
  - id: check-shebang-scripts-are-executable
    name: files - shebang scripts executable
- repo: https://github.com/astral-sh/ruff-pre-commit
  rev: v0.8.6
  hooks:
  - id: ruff
    name: python - ruff lint (pedantic)
    args:
    - --no-fix
  - id: ruff-format
    name: python - ruff format
    args:
    - --check
- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v1.14.1
  hooks:
  - id: mypy
    name: python - mypy type check (strict)
    args:
    - --strict
    - --warn-unreachable
    - --warn-redundant-casts
    - --warn-unused-ignores
    - --no-implicit-reexport
    - --disallow-untyped-decorators
    additional_dependencies: []
- repo: https://github.com/PyCQA/bandit
  rev: 1.8.0
  hooks:
  - id: bandit
    name: python - bandit security scan
    args:
    - -ll
    - -ii
    - -r
    exclude: ^tests/
- repo: https://github.com/jendrikseipp/vulture
  rev: v2.14
  hooks:
  - id: vulture
    name: python - vulture dead code
    args:
    - --min-confidence
    - '80'
    - .
    pass_filenames: false
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v5.0.0
  hooks:
  - id: check-ast
    name: python - check ast syntax
  - id: debug-statements
    name: python - no debug statements
  - id: name-tests-test
    name: python - test files named test_*
    args:
    - --pytest-test-first
- repo: https://github.com/shellcheck-py/shellcheck-py
  rev: v0.10.0.1
  hooks:
  - id: shellcheck
    name: shell - shellcheck lint
    args:
    - --severity=info
    - -x
- repo: https://github.com/scop/pre-commit-shfmt
  rev: v3.10.0-1
  hooks:
  - id: shfmt
    name: shell - shfmt format check
    args:
    - -i
    - '2'
    - -ci
    - -bn
    - -d
- repo: https://github.com/pypa/pip-audit
  rev: v2.10.0
  hooks:
  - id: pip-audit
    name: python - pip-audit CVE scan
    args:
    - --strict
    - --progress-spinner
    - 'off'
    - -r
    - requirements-audit.txt
