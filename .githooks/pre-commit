#!/bin/bash
# =============================================================================
# STRICT Pre-Commit Hook for AI-Driven Development
# =============================================================================
# CodeAgent framework - runs pre-commit framework with all strict checks.
# AI agents need guardrails - this is the fence. No bypasses allowed.
# =============================================================================

set -euo pipefail

echo "========================================"
echo "üîí STRICT Pre-Commit Checks (CodeAgent)"
echo "========================================"
echo ""

# Check if pre-commit is installed
if ! command -v pre-commit &>/dev/null; then
  echo "‚ùå pre-commit not found!"
  echo ""
  echo "Install with:"
  echo "  pip install pre-commit"
  echo "  # or"
  echo "  uv pip install pre-commit"
  echo ""
  echo "Then run:"
  echo "  pre-commit install"
  echo ""
  exit 1
fi

# Run pre-commit with all hooks
echo "Running pre-commit framework..."
echo ""

pre-commit run --all-files

echo ""
echo "========================================"
echo "‚úÖ All pre-commit checks passed!"
echo "========================================"
